<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">

<link rel="import" href="../travel-status-box/travel-status.html">

<link rel="import" href="../../../styles/shared-styles.html">
<link rel="import" href="../../../styles/et2f-styles.html">

<dom-module id="travel-report">
  <style include="shared-styles et2f-styles iron-flex">
    :host {
      display: block;
      width: 100%;
    }

    .container {
      padding: 24px;
    }

    paper-material {
      padding: 0;
      margin-right: 24px;
    }

    .card-heading {
      font-size: 20px;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      height: 48px;
      line-height: 48px;
      color: white;
      background-color: var(--et2f-sec-blue);
      text-align: center;
    }

    paper-textarea {
      margin: 48px 48px 24px 48px;
    }

    paper-button {
      width: 130px;
      height: 36px;
      line-height: 36px;
      background-color: var(--et2f-primary);
      color: white;
      font-weight: 500;
      font-size: 14px;
      margin-left: 48px;
      margin-bottom: 48px;
    }
  </style>

  <template>
    <div class="container layout horizontal">

      <paper-material class="flex" elevation="1">

        <div class="card-heading">
          Travel report
        </div>

        <paper-textarea
          label="Add your report here*"
          char-counter
          maxlength="5000"
          value="{{reportString}}">
        </paper-textarea>

        <paper-button raised on-click="saveReport">
          Save report
        </paper-button>
      </paper-material>

      <travel-status
        user-type="God"
        status="[[data.status]]"
        cancelled-date="[[data.canceled_at]]"
        completed-date="[[data.completed_at]]">
        user-type="[[userType]]"
        status="[[data.status]]">
      </travel-status>

    </div>


  </template>

  <script>
    Polymer({
      is: 'travel-report',
      properties: {
        reportString: {
          type: String,
          observer: 'setReportToData'
        },
        data: {
          type: Object,
          notify: true
        },
        userType: String
      },
      setReportToData: function() {
        this.set('data.report', this.reportString);
      },
      saveReport: function() {
        this.fire('form-action', {endPoint:'save'});
      }
    });
  </script>
</dom-module>
