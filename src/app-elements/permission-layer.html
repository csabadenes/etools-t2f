<script>
  var PermissionLayer = {
    properties: {
      permissionsMatrix: {
        type: Object,
      },
      computedPermission: {
        type: Object,
        notifies: true
      }
    },
    observers: ['_calculatePermissions(permissionsMatrix)'],
    _calculatePermissions: function (matrix) {
      if (matrix) {
        var elements = Object.keys(matrix);
        elements.forEach(function(label) {
          var e = matrix[label];
          if(e && e instanceof Object) {
            e.disabled = !e.edit;
            e.hidden = !e.view;
            delete e.edit;
            delete e.view;
//          matrix[label].readOnly = !matrix[label].edit && matrix[label].view
          }
          else if (e instanceof Boolean) {
            matrix.disabled = !matrix.edit;
            matrix.hidden = !matrix.view;
          }

        });
        this.computedPermission = matrix;
      }
    },
  };
  window.et2fBehaviors = window.et2fBehaviors ? window.et2fBehaviors : {};
  window.et2fBehaviors['PermissionLayer'] = PermissionLayer;
</script>
